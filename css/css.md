[TOC]



## left：50%，且不设置宽度的时候，会为元素自动设置最大宽度为50%

### 需求

想要实现一个元素水平垂直居中，并且宽度需要跟随内容自适应，最大宽度：calc（100%-80px），并且元素的显示，不能遮挡页面的其他内容的操作。

### 解决方案

**方案1：**

如果设置了一个fixed的元素，不设置宽高，并设置了水平垂直居中：

```css
top: 50%;
left: 50%;
tranform: translate(-50%, -50%)	
```

这个时候，如果元素内容足够多，宽度最大也只能到达屏幕的50%（猜测是为了防止设置了left: 50%后，显示内容会超出屏幕被截断），为了验证这个想法，我将left修改为了40%，结果宽度最大只能到达屏幕的60%，因此这个猜想是成立的。

此方案的元素宽度无法满足需求。

**方案2：**

设置一个父元素，宽高设置为屏幕的百分百，并设置透明度为0，然后使用flex设置显示的内容元素居中：

```css
display: flex;
align-items: center;
justfy-content: center;
```

但是由于父元素会将页面的整体覆盖，会导致遮挡页面的其他内容操作。

**方案3：**

在方案1的基础上进行升级，因为元素没有设置宽度，会导致引擎会自动设置一个最大的宽度，因此我们就手动设置宽度。

通过获取元素内容的显示宽度，并将宽度显式的设置到元素上，这样就可以避免自动设置宽度的问题。

```vue
        :style="{
            width: toastWidth
        }"
```

```js
            this.$nextTick(() => {
                let textRect = this.$refs.hideView.$el.getBoundingClientRect();
                this.toastWidth = textRect + 'px';
            })
```

